(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{738:function(s,a,t){"use strict";t.r(a);var n=t(18),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"docker入门"}},[s._v("Docker入门")]),s._v(" "),t("h2",{attrs:{id:"一、docker概述"}},[s._v("一、Docker概述")]),s._v(" "),t("h3",{attrs:{id:"_01-docker为什么出现"}},[s._v("01 | Docker为什么出现？")]),s._v(" "),t("p",[s._v("一款产品∶开发--上线两套甚至多套环境!应用环境，应用配置!")]),s._v(" "),t("p",[s._v("开发…运维。"),t("strong",[s._v("问题")]),s._v("︰我在我的电脑上可以运行!版本更新，导致服务不可用!对于运维来说，考验就十分大。")]),s._v(" "),t("p",[s._v("环境配置是十分的麻烦，每一个机器都要部署环境（集群Redis、ES、Hadoop.....)!费时费力。")]),s._v(" "),t("p",[s._v("发布一个项目( jar + ( Redis MySQL jdk ES ))，项目能不能都带上环境安装打包!")]),s._v(" "),t("p",[s._v("之前在服务器配置一个应用的环境Redis MySQL jdk ES Hadoop，配置超麻烦了，不能够跨平台。")]),s._v(" "),t("p",[s._v("Windows，最后发布到Linux !")]),s._v(" "),t("p",[s._v("传统：开发构建成jar，发布由运维来负责")]),s._v(" "),t("p",[s._v("现在：开发打包部署上线，一套流程做完!")]),s._v(" "),t("p",[s._v("java -- apk --发布（应用商店)----张三使用apk ---安装即可用!")]),s._v(" "),t("p",[s._v("java -- jar（环境.).....打包项目带上环境(镜像:) … ( Docker仓库:商店 ) …下载我们发布的镜像....直接运行即可!")]),s._v(" "),t("p",[s._v("Docker给以上的问题，提出了解决方案!")]),s._v(" "),t("p",[s._v("JRE--多个应用（端口冲突)---原来都是交叉的!")]),s._v(" "),t("p",[s._v("隔离：Docker核心思想!打包装箱!每个箱子是互相隔离的。水果―生化武器")]),s._v(" "),t("p",[s._v("Docker 通过隔离机制，可以将服务器利用到极致!")]),s._v(" "),t("p",[s._v("本质：所有的技术都是因为出现了一些问题，我们需要去解决，才去学习!。")]),s._v(" "),t("h3",{attrs:{id:"_02-docker的历史"}},[s._v("02 | Docker的历史")]),s._v(" "),t("p",[s._v("2010年，几个搞IT的年轻人，就在美国成立了一家公司dotcloud")]),s._v(" "),t("p",[s._v("做一些pass的云计算服务!LXC有关的容器技术!")]),s._v(" "),t("p",[s._v("他们将自己的技术(容器化技术)命名就是Docker !")]),s._v(" "),t("p",[s._v("Docker刚刚诞生的时候，没有引起行业的注意! dotCloud，就活不下去!")]),s._v(" "),t("p",[s._v("开源-----开发源代码! 开源成就了Docker")]),s._v(" "),t("p",[s._v("2013年，Docker开源!")]),s._v(" "),t("p",[s._v("Docker越来越多的人发现了docker的优点!火了，Docker每个月都会更新一个版本!2014年4月9日，Docker1.0发布!")]),s._v(" "),t("p",[s._v("Docker为什么这么火?十分的轻巧!")]),s._v(" "),t("p",[s._v("在容器技术出来之前，我们都是使用虚拟机技术!")]),s._v(" "),t("p",[s._v("虚拟机：在window中装一个Vmware，通过这个软件我们可以虚拟出来一台或者多台电脑!**笨重!**虚拟机也是属于虚拟化技术，Docker容器技术，也是一种虚拟化技术!")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vm :  linux centos原生镜像（一个电脑!)   隔离，需要开启多个虚拟机!    几个G     几分钟\n\ndocker:   隔离，  镜像（最核心的环境 4m + jdk + mysql)十分的小巧，运行镜像就可以了!   小巧!  几个M  KB   秒级启动!\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("聊聊Docker")])]),s._v(" "),t("p",[s._v("Docker是基于Go语言开发的!开源项目")]),s._v(" "),t("p",[s._v("官网：https://www.docker.com/")]),s._v(" "),t("p",[s._v("文档地址：https://docs.docker.com/")]),s._v(" "),t("p",[s._v("仓库地址：https://hub.docker.com/")]),s._v(" "),t("h3",{attrs:{id:"_03-docker能干什么"}},[s._v("03 | Docker能干什么？")]),s._v(" "),t("blockquote",[t("p",[s._v("虚拟机技术")])]),s._v(" "),t("p",[s._v("虚拟机技术缺点∶")]),s._v(" "),t("p",[s._v("1、资源占用十分多")]),s._v(" "),t("p",[s._v("2、冗余步骤多")]),s._v(" "),t("p",[s._v("3、启动很慢!")]),s._v(" "),t("blockquote",[t("p",[s._v("容器化技术")])]),s._v(" "),t("p",[s._v("容器化技术不是模拟的一个完整的操作系统")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720092438527-2021-10-419:52:04.png",alt:"image-20210720092438527"}})]),s._v(" "),t("p",[s._v("比较Docker和虚拟机技不的个同:")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("传统虚拟机，虚拟出一条硬件，运行一个完整的操作系统，然后在这个系统上安装和运行软件")])]),s._v(" "),t("li",[t("p",[s._v("容器内的应用直接运行在宿主机的内核，容器是没有自己的内核的，也没有虚拟我们的硬件，所以就轻便了")])]),s._v(" "),t("li",[t("p",[s._v("每个容器间是互相限离，每个容器内都有一个属于自己的文件系统，互不影响")])])]),s._v(" "),t("h2",{attrs:{id:"二、docker安装"}},[s._v("二、Docker安装")]),s._v(" "),t("h3",{attrs:{id:"_01-docker的基本组成"}},[s._v("01 | Docker的基本组成")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210719234751466-2021-10-4-19:52:47.png",alt:"image-20210719234751466"}})]),s._v(" "),t("p",[t("strong",[s._v("镜像（ image ) :")])]),s._v(" "),t("p",[s._v("Docker镜像就好比是一个模板，可以通过这个模板来创建容器服务，tomcat镜像===>run ==> tomcat01容器(提供服务器），通过这个镜像可以创建多个容器（最终服务运行或者项目运行就是在容器中的)。")]),s._v(" "),t("p",[t("strong",[s._v("容器( container ) :")])]),s._v(" "),t("p",[s._v("Docker利用容器技术，独立运行一个或者一个组应用，通过镜像来创建的。")]),s._v(" "),t("p",[s._v("启动，停止，删除，基本命令!")]),s._v(" "),t("p",[s._v("目前就可以把这个容器理解为就是一个简易的linux系统")]),s._v(" "),t("p",[t("strong",[s._v("仓库( repository ) :")])]),s._v(" "),t("p",[s._v("仓库就是存放镜像的地方!")]),s._v(" "),t("p",[s._v("仓库分为公有仓库和私有仓库!")]),s._v(" "),t("p",[s._v("Docker Hub(默认是国外的)")]),s._v(" "),t("p",[s._v("阿里云...都有容器服务器（配置镜像加速!)")]),s._v(" "),t("h3",{attrs:{id:"_02-安装docker"}},[s._v("02 | 安装Docker")]),s._v(" "),t("blockquote",[t("p",[s._v("环境准备")])]),s._v(" "),t("p",[s._v("1、需要会一点点的Linux的基础")]),s._v(" "),t("p",[s._v("2、CentOs 7")]),s._v(" "),t("p",[s._v("3、我们使用Xshell连接远程服务器进行操作!")]),s._v(" "),t("blockquote",[t("p",[s._v("环境查看")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统内核是 3.10以上的")]),s._v("\nLast login: Sun Jul  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":38:47 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v(" from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),s._v(".2.2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uname -r")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-327.4.5.el7.x86_64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 系统版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/os-release")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS Linux"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7 (Core)"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"centos"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID_LIKE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rhel fedora"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VERSION_ID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PRETTY_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS Linux 7 (Core)"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ANSI_COLOR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0;31"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CPE_NAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cpe:/o:centos:centos:7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HOME_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://www.centos.org/"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BUG_REPORT_URL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://bugs.centos.org/"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CENTOS_MANTISBT_PROJECT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CentOS-7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CENTOS_MANTISBT_PROJECT_VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDHAT_SUPPORT_PRODUCT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"centos"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDHAT_SUPPORT_PRODUCT_VERSION")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("blockquote",[t("p",[s._v("安装")])]),s._v(" "),t("p",[s._v("帮助文档：https://docs.docker.com/get-docker/")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720094009565-2021-10-4-19:53:10.png",alt:"image-20210720094009565"}})]),s._v(" "),t("p",[s._v("进去之后选择我们的centOS系统：https://docs.docker.com/engine/install/centos/")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、卸载旧的版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-client-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-common "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-latest-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                docker-engine\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、需要的安装包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果一直找不到镜像，请更换域名源，详细内容请参考：#https://blog.csdn.net/wangshuai6707/article/details/104609213/")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3、设置镜像的仓库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n   --add-repo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n   https://download.docker.com/linux/centos/docker-ce.repo "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认是国外的！")]),s._v("\n   \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n   --add-repo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n   http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 换成国内的阿里云镜像，速度很快！")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新yum软件包索引")]),s._v("\nyum makecache fast\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4、安装docker docker-ce：社区版  docker-ee：企业版")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5、启动docker")]),s._v("\nsystemctl start docker\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6、使用docker version查看是否安装成功")]),s._v("\ndocker version\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7、hello-world")]),s._v("\ndocker run hello-world\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 8、查看一下下载的这个 hello-world 镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY        TAG                 IMAGE ID            CREATED             SIZE\nhello-world      latest              d1165f221234        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" months ago        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("p",[s._v("了解：卸载docker")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、卸载依赖")]),s._v("\nyum remove docker-ce docker-ce-cli containerd.io\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、删除资源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /var/lib/docker\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /var/lib/docker    docker的默认工作路径!")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"_03-阿里云镜像加速"}},[s._v("03 | 阿里云镜像加速")]),s._v(" "),t("p",[s._v("1、进入阿里云官网，搜索容器镜像服务")]),s._v(" "),t("p",[s._v("2、依次执行官方的这四条命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://axvfsf7e.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_04-回顾helloworld流程"}},[s._v("04 | 回顾HelloWorld流程")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720001236086-2021-10-4-19:53:25.png",alt:"image-20210720001236086"}})]),s._v(" "),t("h3",{attrs:{id:"_05-底层原理"}},[s._v("05 | 底层原理")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720001513548-2021-10-4-19:53:40.png",alt:"image-20210720001513548"}})]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("Docker为什么比VM快")])])]),s._v(" "),t("p",[s._v("1、Docker有着比虚拟机更少的抽象层")]),s._v(" "),t("p",[s._v("2、Docker利用的是宿主机的额内核，VM需要的是Guest OS（Cent OS、Ubuntu.....）")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720100303344-2021-10-4-19:53:58.png",alt:"image-20210720100303344"}})]),s._v(" "),t("p",[s._v("所以说，新建一个容器的时候，Docker不需要想虚拟机一样重新加载一个操作系统内核，避免引导。")]),s._v(" "),t("p",[s._v("虚拟机是加载Guest Oos,分钟级别的，而Docker是利用宿主机的操作系统吗，省略了这个复杂的过程，秒级!|")]),s._v(" "),t("h2",{attrs:{id:"三、docker的常用命令"}},[s._v("三、Docker的常用命令")]),s._v(" "),t("h3",{attrs:{id:"_01-帮助命令"}},[s._v("01 | 帮助命令")]),s._v(" "),t("p",[s._v("帮助文档地址：https://docs.docker.com/engine/reference/commandline/docker/")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker version        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示docker的版本信息.")]),s._v("\ndocker info           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示docker的系统信息.,包括镜像和容器的数量")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("命令"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --help   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 帮助命令")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_02-镜像命令"}},[s._v("02 | 镜像命令")]),s._v(" "),t("p",[t("strong",[s._v("docker images 查看本地镜像")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY        TAG                 IMAGE ID            CREATED             SIZE\nhello-world      latest              d1165f221234        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" months ago        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解释")]),s._v("\nREPOSITORY "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像的仓库源")]),s._v("\nTAG        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像的标签")]),s._v("\nIMAGE ID   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像的id")]),s._v("\nCREATED    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 境像的创建时间")]),s._v("\nSIZE       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像的太小")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可选项")]),s._v("\n-a,--all    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有镜像")]),s._v("\n-q,--quiet  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示镜像的id")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[t("strong",[s._v("docker search 搜素镜像")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search mysql")]),s._v("\nNAME              DESCRIPTION           STARS               OFFICIAL            AUTOMATED\nmysql    MySQL is a widely used, open-source relation…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11145")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看帮助命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search --help")]),s._v("\n\nUsage:  docker search "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("TERM")]),s._v("\n\nSearch the Docker Hub "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" images\n\nOptions:\n  -f, --filter filter   Filter output based on conditions provided\n      --format string   Pretty-print search using a Go template\n      --limit int       Max number of search results "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      --no-trunc        Don't truncate output\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用--filter进行过滤，搜索出来的就是STARS大于等于3000的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search mysql --filter=STARS=3000")]),s._v("\nNAME                DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nmysql               MySQL is a widely used, open-source relation…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11145")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("                \nmariadb             MariaDB Server is a high performing "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" sou…   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4224")]),s._v("                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[t("strong",[s._v("docker pull 下载镜像")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载镜像docker pu1l镜像名[:tag]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull mysql")]),s._v("\nUsing default tag: latest "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果不写tag，默认就是lastest")]),s._v("\nlatest: Pulling from library/mysql\nb4d181a07f80: Pull complete  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分层下载 docker image的核心 联合文件系统")]),s._v("\na462b60610f5: Pull complete \n578fafb77ab8: Pull complete \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("524046006037")]),s._v(": Pull complete \nd0cbe54c8855: Pull complete \naa18e05cc46d: Pull complete \nfd6f649b1d0a: Pull complete \n2a97d48c2fdc: Pull complete \n30f0c7db48fc: Pull complete \nf5dda8df049e: Pull complete \n671b83fd7448: Pull complete \n5d9cc55fa997: Pull complete \nDigest: sha256:18d8d109aa64673c78aebfb845b929cfdac97a553332f4310f4de8d67ceb03d2 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 签名")]),s._v("\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mysql:latest\ndocker.io/library/mysql:latest "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 真实地址")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等价的两个命令")]),s._v("\ndocker pull mysql\ndocker pu11 docker.io/1ibrary/mysq1:latest\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载指定版本的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull mysql:5.7")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(": Pulling from library/mysql\nb4d181a07f80: Already exists \na462b60610f5: Already exists \n578fafb77ab8: Already exists \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("524046006037")]),s._v(": Already exists \nd0cbe54c8855: Already exists \naa18e05cc46d: Already exists \nfd6f649b1d0a: Already exists "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 分层下载的好处 不用每次都从头开始下载")]),s._v("\n8a2b858b000b: Pull complete \n322182b17422: Pull complete \n070e28050a88: Pull complete \n613bdfd8796e: Pull complete \nDigest: sha256:956e11ac581cad9ac8747a9a1d61b8ffcfa6845e0f23bdbab6ba20a2ad792cbf\nStatus: Downloaded newer image "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" mysql:5.7\ndocker.io/library/mysql:5.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br")])]),t("p",[t("strong",[s._v("docker rmi 删除镜像")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker rmi -f 镜像id "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除指定的镜像")]),s._v("\ndocker rmi -f 镜像id 镜像id 镜像id 镜像id "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除多个镜像")]),s._v("\ndocker rmi -f "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("docker images -aq）"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除全部的镜像")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_03-容器命令"}},[s._v("03 | 容器命令")]),s._v(" "),t("p",[t("strong",[s._v("说明：我们有了镜像才可以创建容器，linux，下载一个centos镜像来测试学习")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker pull centos\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("新建容器并启动")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("可选参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" image\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#参数说明")]),s._v("\n--name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#容器名字tomcato1 tomcat02，用来区分容器")]),s._v("\n-d            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后台方式运行")]),s._v("\n-it           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用交互方式运行,进入容器查看内容")]),s._v("\n-p            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定容器的端口-p 8080:8080")]),s._v("\n   -p ip:主机端口:容器端口\n   -p 主机端口:容器端口（常用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   -p 容器端口\n    容器端口\n-p 随机指定端口\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试：启动并进入容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it centos /bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@2b80ad7df26f /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls #基础版本的centos，很多命令都不完善")]),s._v("\nbin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从容器中退回到主机 直接容器停止并退出")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@2b80ad7df26f /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" \n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[t("strong",[s._v("列出所有运行的容器")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps命令")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 没有加上参数，会列出当前正在运行的容器")]),s._v("\n-a    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出当前正在运行的容器+带出历史运行过的容器")]),s._v("\n-n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("?  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示最近创建的容器，指定个数")]),s._v("\n-q    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只显示容器的编号")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("退出容器")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接容器停止并退出")]),s._v("\nctr1+p+Q  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器不停止退出")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("删除容器")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 容器id                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除指定的容器 不能删除正在运行的容器 如果要强制删除 使用 rm -f")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aq"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有的容器")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a -q"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("xargs")]),s._v(" docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除所有的容器")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("启动和停止容器的操作")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker start 容器id    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动容器")]),s._v("\ndocker restart 容器id  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启容器")]),s._v("\ndocker stop 容器id     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止当前正在运行的容器")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" 容器id     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 强制停止当前容器")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"_04-常用其他命令"}},[s._v("04 | 常用其他命令")]),s._v(" "),t("p",[t("strong",[s._v("后台启动容器")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令 docker run -d 镜像名!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d centos")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[s._v("问题docker ps，发现centos停止了")]),s._v(" "),t("p",[s._v("常见的坑: docker容器使用后台运行，就必须要有要一个前台进程，docker发现没有应用，就会自动停止，容器启动后，发现自己没有提供服务，就会立刻停止，就是没有程序了")])]),s._v(" "),t("p",[t("strong",[s._v("查看日志")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs -f -t --tail 10  # 发现容器没有日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自己编写一段she11脚本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -d centos /bin/sh -c "while true;do echo 日志打印;s1eep 1; done"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示日志")]),s._v("\n-tf           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示日志")]),s._v("\n--tai7 number "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要显示日志条数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs -tf --tai1 10 7e891e3f50c4")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("strong",[s._v("查看容器中进程信息 ps")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令： docker top 容器id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker top dce7b84398df")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("查看镜像的元数据")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令： docker inspect 容器id")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect dce7b84398df")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("进入当前正在运行的容器")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#方式一")]),s._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it容器id "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" she11\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it dce7b86171bf /bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@dce7b86171bf / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@dce7b86171bf /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#方式二")]),s._v("\ndocker attach容器id\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach dce7b86171bf")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec#进入容器后开启一个新的终端，可以在里面操作（常用)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach#进入容器正在执行的终端，不会启动新的进程!")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("从容器内拷贝文件到主机上")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 容器id:容器内路径 目的主机路径\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看当前主机目录下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入docker容器内部")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker attach b78453025116")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@b78453025116/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cd /home")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@b78453025116 home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1s")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在容器内新建一个文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@b78453025116 home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch test.java")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@b78453025116 home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps -a")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将这文件拷贝出来到主机上")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker cp b78453025116:/home/test.java /home")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\ntest.java\n\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("h3",{attrs:{id:"_05-小结"}},[s._v("05 | 小结")]),s._v(" "),t("img",{staticStyle:{zoom:"120%"},attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720112752478-2021-10-4-20:10:35.png",alt:"image-20210720112752478"}}),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("attach    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前shell下attach连接指定运行镜像")]),s._v("\nbuild     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过Dockerfile定制镜像")]),s._v("\ncommit    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 提交当前容器为新的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从容器中拷贝指定文件或目录到宿主机中")]),s._v("\ncreate    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新的容器，同 run 但不启动容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 docker 容器变化")]),s._v("\nevents    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从docker服务器获取容器实时事件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在已存在的容器上运行命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 导出容器的内容流作为一个 tar 归档文件【对应 import】")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 展示一个镜像形成历史")]),s._v("\nimages    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出系统当前镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从tar包中的内容创建一个新的文件系统映像【对应 export】")]),s._v("\ninfo      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示系统相关信息")]),s._v("\ninspect   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器详细信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill 指定的容器")]),s._v("\nload      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从一个 tar 包中加载一个镜像【对应 save】")]),s._v("\nlogin     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注册或者登录一个 docker 源服务器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("logout")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从当前 Docekr registry 退出")]),s._v("\nlogs      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出当前容器日志信息")]),s._v("\n\nport  \t  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看映射端口对应的容器内部源端口")]),s._v("\npause\t  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 暂停容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 猎户容器列表")]),s._v("\npull      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从docker镜像源服务器拉取指定镜像或者库镜像")]),s._v("\npush      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送指定镜像或者库镜像至docker源服务器")]),s._v("\nrestart   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启运行的容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除一个或多个容器")]),s._v("\nrmi       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除一个或多个镜像 （无容器使用该镜像才可删除，否则需要删除相关容器才可继续或 -f 强制删除）")]),s._v("\nrun       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个新的容器并运行一个命令")]),s._v("\nsave      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保存一个镜像为一个 tar 包【对应 load】")]),s._v("\nsearch    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 docker hub 中搜索镜像")]),s._v("\nstart     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动容器")]),s._v("\nstop      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止容器")]),s._v("\ntag       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给源中镜像打标签")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器中运行的进程信息")]),s._v("\nunpause   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消暂停容器")]),s._v("\nversion   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 docker版本号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 截取容器停止时的退出状态值")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("p",[s._v("以上是基本的命令，之后还有很多常用的命令需要学习！")]),s._v(" "),t("h3",{attrs:{id:"_06-常用容器部署"}},[s._v("06 | 常用容器部署")]),s._v(" "),t("blockquote",[t("p",[s._v("Nginx部署")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、搜索镜像 search 建议大家去docker搜索，可以看到帮助文档")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、下载镜像pu11")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3、运行测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d 后台运行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --name 给容器命名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -p 宿主机端口:容器内部端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d --name nginx01 -p 3344:80 ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cur1 localhost:3344")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it nginx01 /bin/bash")]),s._v("\nroot@495da2065213:"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# whereis nginx")]),s._v("\nnginx: /usr/sbin/nginx /usr/1ib/nginx /etc/nginx /usr/share/nginx\nroot@495da2065213:/"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /etc/nginx")]),s._v("\nroot@495da2065213:/etc/nginx"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1s")]),s._v("\nconf.d fastcgi_params koi-utf koi-win mime.types modules nginx.conf scgi_params uwsgi_paramswin-utf\nrootQ495da2065213:/etc/nginx"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[s._v("端口暴露的概念：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720113417752-2021-10-4-20:23:16.png",alt:"image-20210720113417752"}})]),s._v(" "),t("p",[t("strong",[s._v("思考问题")]),s._v("∶我们每次改动nginx配置文件，都需要进入容器内部?十分的麻烦，我要是可以在容器外部提供一个映射路径，达到在容器修改文件名，容器内部就可以自动修改?-v数据卷!")]),s._v(" "),t("blockquote",[t("p",[s._v("Tomcat部署")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#官方的使用")]),s._v("\ndocker run -it --rm tomcat:9.0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#我们之前的启动都是后台，停止了容器之后，容器还是可以查到 docker run -it --rm，一般用来测试，用完就删除")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载在启动")]),s._v("\ndocker pu1l tomcat\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动运行")]),s._v("\ndocker run -d -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3355")]),s._v(":8080 --name tomcat01 tomcat\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试访问没有间题")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat01 /bin/bash")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发现问题，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、1inux命令少了，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、没有webapps。阿里云镜像的原因。默认是最小的诡像，所有不必要的都剔除掉。#保证最小可运行的环境!")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("blockquote",[t("p",[s._v("ES+Kibana部署")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es暴露的端口很多!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es十分的耗内存")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es的数据一般需要放置到安全目录!挂载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --net somenetwork ?网络配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启 动elasticsearch")]),s._v("\ndocker run -d --name elasticsearch -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v("elasticsearch:7.6.2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动了1inux就卡住了docker stats查看cpu的状态")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# es是十分耗内存的，1.xG 1核2G!")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看docker stats")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试一下es是够成功了")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cur1 localhost:9200")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7e2469973535"')]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster_name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-cluster"')]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cluster_uuid"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eJ1FbVtzs9iERQ71EQjoug"')]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"number"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7.6.2"')]),s._v(",\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bui1d_flavor"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v(",\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bui1d_type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker "')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build_hash"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ef48eb35cf30adf4db14086e8aabd07ef6fb113f"')]),s._v(",\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bui1d_date"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-03-26T06:34 : 37.794943z"')]),s._v(",\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bui1d_snapshot"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1ucene_version"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8.4.o"')]),s._v(",\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minimum_wire_compatibility_version"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.8.o"')]),s._v(",\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"minimum_index_compatibility_version"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.0.0-beta1"')]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(",\t\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tagline"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"You Know，for Search"')]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#赶紧关闭，增加内存的限制，修改配置文件-e环境配置修改")]),s._v("\ndocker run -d --name elasticsearch02 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.typemsingle-node"')]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-xms64m -Xmx512m"')]),s._v(" elasticsearch:7.6.2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再查看docker stats")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("Tips")]),s._v(" "),t("p",[s._v("使用Kibana连接ES，思考网络如何才能连接过去")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004203203088-2021-10-4-20:32:03.png",alt:"image-20211004203203088"}})]),s._v(" "),t("h3",{attrs:{id:"_07-可视化"}},[s._v("07 | 可视化")]),s._v(" "),t("p",[s._v("Portaniner是Docker的图形化管理工具，类似的工具还有Rancher(CI/CD再用)")]),s._v(" "),t("p",[s._v("下载运行Portaniner镜像并运行，设置本机映射端口为8088")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("第一次登录设置admin用户的密码")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004204258765-2021-10-4-20:42:59.png",alt:"image-20211004204258765"}})]),s._v(" "),t("p",[s._v("如果是阿里云服务器记得设置安全组，选择连接本地的Docker,整体界面预览如下图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004204402629-2021-10-4-20:44:02.png",alt:"image-20211004204402629"}})]),s._v(" "),t("p",[s._v("可视化面板一般我们不会用，平时自己玩玩就可以了！")]),s._v(" "),t("h2",{attrs:{id:"四、docker镜像"}},[s._v("四、Docker镜像")]),s._v(" "),t("h3",{attrs:{id:"_01-镜像是什么"}},[s._v("01 | 镜像是什么")]),s._v(" "),t("p",[s._v("镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需要的所有内容，包括代码，运行时（一个程序在运行或者在被执行的依赖）、库，环境变量和配置文件。")]),s._v(" "),t("p",[s._v("所有的应用，直接打包docker镜像，就可以直接跑起来!")]),s._v(" "),t("p",[s._v("如何得到镜像:")]),s._v(" "),t("ul",[t("li",[s._v("从远程仓库下载")]),s._v(" "),t("li",[s._v("朋友拷贝给你")]),s._v(" "),t("li",[s._v("自己制作一个镜像DockerFile")])]),s._v(" "),t("h3",{attrs:{id:"_02-docker镜像加载原理"}},[s._v("02 | Docker镜像加载原理")]),s._v(" "),t("blockquote",[t("p",[s._v("UnionFS（联合文件系统）")])]),s._v(" "),t("p",[s._v("我们下载的时候看到的一层层就是这个!")]),s._v(" "),t("p",[s._v("UnionFS( 联合文件系统） :Union文件系统(UnionFS)是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtualfilesystem)。"),t("strong",[s._v("Union文件系统是Docker镜像的基础")]),s._v("。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。")]),s._v(" "),t("p",[s._v("**特性:**一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录")]),s._v(" "),t("blockquote",[t("p",[s._v("Docker镜像加载原理")])]),s._v(" "),t("p",[s._v("docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统UnionFS。")]),s._v(" "),t("p",[s._v("bootfs(boot file system)主要包含bootloader和kernel, bootloader主要是引导加载kernel, Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。")]),s._v(" "),t("p",[s._v("rootfs (root fle system)，在bootfs之上。包含的就是典型Linux系统中的/dev, /proc, /bin, /etc等标准目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu , dentos等等。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004205012965-2021-10-4-20:50:13.png",alt:"image-20211004205012965"}})]),s._v(" "),t("h3",{attrs:{id:"_03-分层原理"}},[s._v("03 | 分层原理")]),s._v(" "),t("blockquote",[t("p",[s._v("分层的镜像")])]),s._v(" "),t("p",[s._v("我们可以去下载一个镜像，注意观察下载的日志输出，可以看到是一层层的在下载")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004205116891-2021-10-4-20:51:17.png",alt:"image-20211004205116891"}})]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("思考:为什么Docker镜像要采用这种分层的结构呢?")]),s._v(" "),t("p",[s._v("最大的好处，我觉得莫过于是资源共享了!比如有多个镜像都从相同的Base镜像构建而来，那么宿主机只需在磁盘上保留一份base镜像，同时内存中也只需要加载一份base镜像，这样就可以为所有的容器服务了，而且镜像的每一层都可以被共享。")])]),s._v(" "),t("p",[s._v("查看镜像分层的方式可以通过docker image inspect命令!")]),s._v(" "),t("p",[s._v(":::detail docker image inspect命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker image inspect nginx:latest")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:ae2feff98a0cc5095d97c6c283dcd33090770c76d63877caa99aefbbe4343bdd"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RepoTags"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx:latest"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RepoDigests"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx@sha256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Parent"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Comment"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-12-15T20:21:00.007674532Z"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Container"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4cc5da85f27ca0d200407f0593422676a3bab482227daee044d797d1798c96c9"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ContainerConfig"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hostname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4cc5da85f27c"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Domainname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdout"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStderr"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExposedPorts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"80/tcp"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Tty"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OpenStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StdinOnce"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Env"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX_VERSION=1.19.6"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NJS_VERSION=0.5.0"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PKG_RELEASE=1~buster"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cmd"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"#(nop) "')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"CMD ['),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("nginx"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("-g"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("daemon off;"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(']"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:13bffe371b56f4aeed88218ec17d0c6f653a83b49bd3e211fc8cfa2ca5d7a3d3"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Volumes"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkingDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Entrypoint"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.sh"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OnBuild"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maintainer"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX Docker Maintainers <docker-maint@nginx.com>"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StopSignal"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SIGQUIT"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DockerVersion"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"19.03.12"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Author"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Config"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hostname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Domainname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStdout"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AttachStderr"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ExposedPorts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"80/tcp"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Tty"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OpenStdin"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StdinOnce"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Env"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX_VERSION=1.19.6"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NJS_VERSION=0.5.0"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PKG_RELEASE=1~buster"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Cmd"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:13bffe371b56f4aeed88218ec17d0c6f653a83b49bd3e211fc8cfa2ca5d7a3d3"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Volumes"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkingDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Entrypoint"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.sh"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OnBuild"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Labels"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"maintainer"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NGINX Docker Maintainers <docker-maint@nginx.com>"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"StopSignal"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SIGQUIT"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Architecture"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"amd64"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Os"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"linux"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Size"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("132935043")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"VirtualSize"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("132935043")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GraphDriver"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Data"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LowerDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/cb791e78a08db7091bf2ce1d78603f1758f52199e57f1805156fe30e39067aae/diff:/var/lib/docker/overlay2/1e73a72b25af68ee9abf4eb443f778d31226e12e9af428fcc14c7b044c83b258/diff:/var/lib/docker/overlay2/88c9c01762f2af8327db65d0b0d4a64785e87c9c2ab76c62e7d03619db03a985/diff:/var/lib/docker/overlay2/7304ab112ac4a9cb91fc6f74730be28fecbe19f042e92d321aa9181424cc4b2e/diff"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MergedDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/merged"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UpperDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/diff"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WorkDir"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/work"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"overlay2"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RootFS"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"layers"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Layers"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:87c8a1d8f54f3aa4e05569e8919397b65056aa71cdf48b7f061432c98475eee9"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:5c4e5adc71a82a96f02632433de31c998c5a9e2fccdcbaee780ae83158fac4fa"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:7d2b207c26790f693ab1942bbe26af8e2b6a14248969e542416155a912fec30d"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:2c7498eef94aef8c40d106f3e42f7da62b3eee8fd36012bf7379becc4cd639a2"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:4eaf0ea085df254fd5d2beba4e2c11db70a620dfa411a8ad44149e26428caee4"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Metadata"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LastTagTime"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0001-01-01T00:00:00Z"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br")])]),t("p",[s._v(":::")]),s._v(" "),t("p",[s._v("这里指示了分层信息")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"RootFS"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Type"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"layers"')]),s._v(",\n            "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Layers"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:87c8a1d8f54f3aa4e05569e8919397b65056aa71cdf48b7f061432c98475eee9"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:5c4e5adc71a82a96f02632433de31c998c5a9e2fccdcbaee780ae83158fac4fa"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:7d2b207c26790f693ab1942bbe26af8e2b6a14248969e542416155a912fec30d"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:2c7498eef94aef8c40d106f3e42f7da62b3eee8fd36012bf7379becc4cd639a2"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sha256:4eaf0ea085df254fd5d2beba4e2c11db70a620dfa411a8ad44149e26428caee4"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("strong",[s._v("理解")])]),s._v(" "),t("p",[s._v("所有的Docker镜像 "),t("mark",[s._v("都起始于一个基础镜像层，当进行修改或增加新的内容时，就会在当前镜像层之上，创建新的镜像层")])]),s._v(" "),t("p",[s._v("举一个简单的例子，假如基于Ubuntu Linux16.04创建一个新的镜像，这就是新镜像的第一层；如果在该镜像中添加Python包，就会在基础镜像层之上创建第二个镜像层;如果继续添加一个安全补丁就会创建第三个镜像层。\n该镜像当前已经包含3个镜像层，如下图所示（这只是一个用于演示的很简单的例子)。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004205605411-2021-10-4-20:56:05.png",alt:"image-20211004205605411"}})]),s._v(" "),t("p",[s._v("在添加额外的镜像层的同时，镜像始终保持是当前所有镜像的组合，理解这一点非常重要。下图中举了一个简单的例子，每个镜像层包含3个文件，而镜像包含了来自两平镜像层的6个文件。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004205749932-2021-10-4-20:57:50.png",alt:"image-20211004205749932"}})]),s._v(" "),t("p",[s._v("上图中的镜像层跟之前图中的略有区别，主要目的是便于展示文件。")]),s._v(" "),t("p",[s._v("下图中展示了一个稍微复杂的三层镜像，在外部看来整个镜像只有6个文件，这是因为最上层中的文件7是文件5的一个更新版本。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004205850953-2021-10-4-20:58:51.png",alt:"image-20211004205850953"}})]),s._v(" "),t("p",[s._v("Docker在Windows上仅支持windowsfilter一种存储引擎，该引擎基于NTFS文件系统之上实现了分层和CoW[1].下图展示了与系统显示相同的三层镜像。所有镜像层堆叠并合并，对外提供统一的视图。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004205932051-2021-10-4-20:59:32.png",alt:"image-20211004205932051"}})]),s._v(" "),t("blockquote",[t("p",[s._v("特点")])]),s._v(" "),t("p",[s._v("Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部!")]),s._v(" "),t("p",[s._v("这一层就是我们通常说的容器层，容器之下的都叫镜像层!")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004210134104-2021-10-4-21:01:34.png",alt:"image-20211004210134104"}})]),s._v(" "),t("blockquote",[t("p",[s._v("如何提交自己的镜像？？")])]),s._v(" "),t("h3",{attrs:{id:"_04-commit镜像"}},[s._v("04 | commit镜像")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker commit 提交容器成为一个新的副本\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#命令和git原理类似")]),s._v("\ndocker commit -m"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"提交的描述信息"')]),s._v(" -a"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v('"作者” 容器id 目标镜像名:'),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("实战测试")])]),s._v(" "),t("ol",[t("li",[s._v("启动一个默认的tomcat")]),s._v(" "),t("li",[s._v("发现这个默认的tomcat 是没有webapps应用，镜像的原因，官方的镜像默认 webapps下面是没有文件的!")]),s._v(" "),t("li",[s._v("我自己拷贝进去了基本的文件Ⅰ")]),s._v(" "),t("li",[s._v("将我们操作过的容器通过commit提交为一个镜像!我们以后就使用我们修改过的镜像即可，这就是我们自己的一个修改的镜像")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004210550057-2021-10-4-21:05:50.png",alt:"image-20211004210550057"}})]),s._v(" "),t("p",[s._v("**学习方式说明：**理解概念，但是一定要实践，最后实践和理论相结合一次搞定这个知识")]),s._v(" "),t("p",[s._v("如果你想要保存当前容器的状态，就可以通过commit来提交，获得一个镜像，就好比我们以前学习vM时候，快照!")]),s._v(" "),t("p",[s._v("到了这里才算是入门Dokcer !")]),s._v(" "),t("h2",{attrs:{id:"五、容器数据卷"}},[s._v("五、容器数据卷")]),s._v(" "),t("h3",{attrs:{id:"_01-什么是容器数据卷"}},[s._v("01 | 什么是容器数据卷")]),s._v(" "),t("p",[s._v("docker的理念回顾")]),s._v(" "),t("p",[s._v("将应用和环境打包成一个镜像!")]),s._v(" "),t("p",[s._v("数据？如果数据都在容器中，那么我们容器删除，数据就会丢失! "),t("mark",[s._v("需求︰数据可以持久化")])]),s._v(" "),t("p",[s._v("MySQL，容器删了，删库跑路？不存在的 "),t("mark",[s._v("需求:MySQL数据可以存储在本地!")])]),s._v(" "),t("p",[s._v("容器之间可以有一个数据共享的技术!Docker容器中产生的数据，同步到本地!")]),s._v(" "),t("p",[s._v("这就是卷技术!目录的挂载，将我们容器内的目录，挂载到Linux上面!")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004211143887-2021-10-4-21:11:44.png",alt:"image-20211004211143887"}})]),s._v(" "),t("p",[t("strong",[s._v("总结一句话︰容器的持久化和同步操作!容器间也是可以数据共享的!")])]),s._v(" "),t("h3",{attrs:{id:"_02-使用数据卷"}},[s._v("02 | 使用数据卷")]),s._v(" "),t("blockquote",[t("p",[s._v("方式一：直接使用命令挂载 -v")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker run -it -v主机目录，容器内目录\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -it -v/home/ceshi:/home centos /bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动起来时候我们可以通过docker inspect 容器id 查看")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004211220821-2021-10-4-21:12:21.png",alt:"image-20211004211220821"}})]),s._v(" "),t("p",[s._v("测试文件的同步（"),t("strong",[s._v("双向同步")]),s._v("）")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720141435890-2021-10-4-21:13:56.png",alt:"image-20210720141435890"}})]),s._v(" "),t("p",[s._v("再来测试!")]),s._v(" "),t("p",[s._v("1、停止容器")]),s._v(" "),t("p",[s._v("2、宿主机上修改文件3、启动容器")]),s._v(" "),t("p",[s._v("4、容器内的数据依旧是同步的!")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004211501996-2021-10-4-21:15:02.png",alt:"image-20211004211501996"}})]),s._v(" "),t("p",[s._v("好处∶我们以后修改只需要在本地修改即可，容器内会自动同步!")]),s._v(" "),t("h3",{attrs:{id:"_03-实战-安装mysql"}},[s._v("03 | 实战：安装MySQL")]),s._v(" "),t("p",[s._v("思考：MySQL的数据持久化的问题")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pu11 mysq1:5.7")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#运行容器，需要做数据挂载!#安装启动mysq1 ，需要配置密码的，这是要注意点!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#官方测试:docker run --name some-mysq1 -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysq1:tag")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动我们的")]),s._v("\n-d 后台运行\n-p 端口映射\n-v 卷挂载\n-e 环境配置\n--name 容器名字\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p 3310:3306 -v/home/mysq1/conf :/etc/mysq1/conf.d -v/home/mysq1/data:/var/1ib/mysq1 -e MYSQL_ROOT_PASSWORD=123456--name mysq101 mysq1:5.7")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动成功之后，我们在本地使用sqlyog来接测试一下")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sqlyog-连接到服务器的3310 --- 3310 和容器内的 3306映射，这个时候我们就可以连接上了!")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在本地测试创建一个数据库，查看一下我们映射的路径是否ok!")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("假如我们将容器删除，发现，我们挂载到本地的数据卷依旧没有丢失，这就实现了容器数据持久化功能!")]),s._v(" "),t("h3",{attrs:{id:"_04-具名和匿名挂载"}},[s._v("04 | 具名和匿名挂载")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#匿名挂载")]),s._v("\n-v 容器内路径"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\ndocker run -d -p--name nginx01 -v /ect/nginx nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看所有的volume的情况")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume 1s")]),s._v("\nloca1 9f38292179faa178afcce54d80be99d4ddd68c91d2a68870bcece72d2b7ed061\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这里发现，这种就是匿名挂载，我们在 -v 只写了容器内的路径，没有写容器外的路径!")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#具名挂载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p --name nginx02 -v juming-nginx: /etc/nginx nginx")]),s._v("\n95b809564484c8ac87d65c69643e7e67447f1c77ff9a91b93edec7003692e3a9\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker volume ls")]),s._v("\nDRIVER     vOLUME NAME\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("      juming-nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#通过 -v 卷名:容器内路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看一下这个卷")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004212257358-2021-10-4-21:22:57.png",alt:"image-20211004212257358"}})]),s._v(" "),t("p",[s._v("所有的docker容器内的卷，没有指定目录的情况下都是在”/var/1ib/docker/volumes/xxxx/_data我们通过具名挂载可以方便的找到我们的一个卷，"),t("mark",[s._v("大多数情况使用的是具名挂载")])]),s._v(" "),t("h3",{attrs:{id:"_05-初识dockerfile"}},[s._v("05 | 初识Dockerfile")]),s._v(" "),t("p",[s._v("Dockerfile就是用来构建docker镜像的构建文件!命令脚本!先体验一下!")]),s._v(" "),t("p",[s._v("通过这个脚本可以生成镜像，镜像是一层一层的，脚本一个个的命令，每个命令都是一层!")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建一个dockerfile文件，名字可以随机建议Dockerfile")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#文件中的内容指令(大写)参数")]),s._v("\nFROM centos\nVOLUME "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"volume01"')]),s._v(" , "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"volume02"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nCMD "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"----end-----"')]),s._v("\ncMD /bin/bash\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这里的每个命令，就是诡像的一层!|")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720143719079-2021-10-4-21:24:41.png",alt:"image-20210720143719079"}})]),s._v(" "),t("p",[t("strong",[s._v("启动自己的容器")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004212707841-2021-10-4-21:27:08.png",alt:"image-20211004212707841"}})]),s._v(" "),t("p",[s._v("这个卷在宿主机中有同步的目录")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004212819925-2021-10-4-21:28:20.png",alt:"image-20211004212819925"}})]),s._v(" "),t("p",[s._v("查看一下卷挂载的路径")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004212922326-2021-10-4-21:29:22.png",alt:"image-20211004212922326"}})]),s._v(" "),t("h3",{attrs:{id:"_06-数据卷容器"}},[s._v("06 | 数据卷容器")]),s._v(" "),t("p",[s._v("多个MySQL同步数据")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720144247589-2021-10-4-21:29:46.png",alt:"image-20210720144247589"}})]),s._v(" "),t("p",[s._v("测试：")]),s._v(" "),t("p",[s._v("创建数据卷容器容器docker01")]),s._v(" "),t("p",[s._v("创建容器docker02挂载到docker01上")]),s._v(" "),t("p",[s._v("创建容器docker03挂载到docker01上")]),s._v(" "),t("p",[s._v("删除容器docker01")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试，可以删除docker01，查看一下docker03和docker03是否还可以访问这个文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试依旧可以访问")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004213134278-2021-10-4-21:31:34.png",alt:"image-20211004213134278"}})]),s._v(" "),t("p",[s._v("多个MySQL实现数据共享")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p 3310:3306 -v /etc/mysq1/conf.d -v /var/1ib/mysq1 -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysq1:5.7")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost home"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p 3310:3306 -e MYSQL_ROOT_PASSWORD-123456 --name mysq102 --volumes-form mysq101 mysql:5.7")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这个时候，可以实现两个容器数据同步!")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("结论")]),s._v(" "),t("p",[s._v("容器之间配置信息的传递，数据卷容器的生命周期一直持续到没有容器使用为止。")]),s._v(" "),t("p",[s._v("但是一旦你持久化到了本地，这个时候，本地的数据是不会删除的")])]),s._v(" "),t("h2",{attrs:{id:"六、dockerfile"}},[s._v("六、Dockerfile")]),s._v(" "),t("h3",{attrs:{id:"_01-dockerfile介绍"}},[s._v("01 | Dockerfile介绍")]),s._v(" "),t("p",[s._v("Dockerfile是用来构建Dokcer镜像的文件!命令参数脚本!")]),s._v(" "),t("p",[s._v("构建步骤∶")]),s._v(" "),t("p",[s._v("1、编写一个Dockerfile 文件")]),s._v(" "),t("p",[s._v("2、docker build构建成为一个镜像")]),s._v(" "),t("p",[s._v("3、docker run运行镜像")]),s._v(" "),t("p",[s._v("4、docker push 发布镜像(DockerHub、阿里云镜像仓库!)")]),s._v(" "),t("p",[s._v("查看一下官方是怎么做的？")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720145831340-2021-10-4-21:35:45.png",alt:"image-20210720145831340"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720145917664-2021-10-4-21:35:58.png",alt:"image-20210720145917664"}})]),s._v(" "),t("blockquote",[t("p",[s._v("很多官方镜像都是基础包，很多功能没有，我们通常会自己搭建自己的镜像!官方既然可以制作镜像，那我们也可以!")])]),s._v(" "),t("h3",{attrs:{id:"_02-dockerfile构建过程"}},[s._v("02 | Dockerfile构建过程")]),s._v(" "),t("p",[s._v("基础知识∶")]),s._v(" "),t("p",[s._v("1、每个保留关键字(指令）都是必须是大写字母")]),s._v(" "),t("p",[s._v("2、执行从上到下顺序执行")]),s._v(" "),t("p",[s._v("3、#表示注释")]),s._v(" "),t("p",[s._v("4、每一个指令都会创建提交一个新的镜像层，并提交!")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720150221294-2021-10-4-21:36:47.png",alt:"image-20210720150221294"}})]),s._v(" "),t("p",[t("strong",[s._v("Dockerfile是面向开发的")]),s._v("，我们以后要发布项目，做镜像，就需要编写dockerfile文件，这个文件十分简单!")]),s._v(" "),t("p",[s._v("Docker镜像逐渐成为企业交付的标准，必须要掌握!")]),s._v(" "),t("p",[s._v("步骤:开发，部署，运维。。。缺一不可!")]),s._v(" "),t("p",[s._v("DockerFile :构建文件，定义了一切的步骤，源代码")]),s._v(" "),t("p",[s._v("Dockerlmages:通过 DockerFile构建生成的镜像，最终发布和运行的产品!")]),s._v(" "),t("p",[s._v("Docker容器:容器就是镜像运行起来提供服务器")]),s._v(" "),t("h3",{attrs:{id:"_03-dockerfile指令"}},[s._v("03 | Dockerfile指令")]),s._v(" "),t("p",[s._v("以前的话我们就是使用别人的，现在我们知道了这些指令后，我们来练习自己写一个镜像!")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("FROM             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基础镜镜像，一切从这里开始构建")]),s._v("\nMAINTAINER       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像是谁写的，姓名+邮箱")]),s._v("\nRUN              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像构建的时候需要运行的命令")]),s._v("\nADD              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 步骤: tomcat镜像，这个tomcat压缩包!添加内容")]),s._v("\nWORKDIR          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像的工作目录")]),s._v("\nVOLUME           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 挂载的目录")]),s._v("\nEXPOSE           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 保留端口配置")]),s._v("\nCMD              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这个容器启动的时候要运行的命令,只有最后一个会生效，可被替代")]),s._v("\nENTRYPOINT       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这个容器启动的时候要运行的命令,可以追加命令")]),s._v("\nONBUILD          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当构建一个被继承 DockerFile这个时候就会运行ONBUILD的指令。触发指令。")]),s._v("\nCOPY             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 类似ADD，将我们文件拷贝到镜像中")]),s._v("\nENV              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 构建的时候设置环境变量!")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720150907550-2021-10-4-21:38:34.png",alt:"image-20210720150907550"}})]),s._v(" "),t("h3",{attrs:{id:"_04-实战测试"}},[s._v("04 | 实战测试")]),s._v(" "),t("p",[s._v("Docker Hub中99%镜像都是从这个基础镜像过来的"),t("strong",[s._v("FROM scratch")]),s._v("，然后配置需要的软件和配置来进行的构建")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004214229915-2021-10-4-21:42:30.png",alt:"image-20211004214229915"}})]),s._v(" "),t("blockquote",[t("p",[s._v("创建一个自己的CentOS")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1编写Dockerfile的文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat mydockerfile-centos ")]),s._v("\nFROM centos\nMAINTAINER test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22178862750")]),s._v("@qq.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nENV MYPATH /usr/ loca1\nWORKDIR SMYPATH\nRUN yum -y instal1 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\nRUN yum -y insta1l net-too1s\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\nCMD "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" SMYPATH\nCMD "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"----end----"')]),s._v("\nCMD /bin/bash\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2、通过这个文件构建镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#命令docker build -f dockerfile文件路径 -t 镜像名:[tag]")]),s._v("\nSuccessfu1ly built e2bd75cfe070\nsuccessfu11y tagged mycentos :0.1\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3、测试运行")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("blockquote",[t("p",[s._v("对比")])]),s._v(" "),t("p",[s._v("之前原生的centos")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004214624727-2021-10-4-21:46:25.png",alt:"image-20211004214624727"}})]),s._v(" "),t("p",[s._v("我们添加之后的镜像")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004214705401-2021-10-4-21:47:05.png",alt:"image-20211004214705401"}})]),s._v(" "),t("p",[s._v("我们可以列出本地进行的"),t("strong",[s._v("变更历史")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004214802059-2021-10-4-21:48:02.png",alt:"image-20211004214802059"}})]),s._v(" "),t("blockquote",[t("p",[s._v("CMD和ENTRYPOINT的区别")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("CMD            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这个容器启动的时候要运行的命令,只有最后一个会生效，可被替代")]),s._v("\nENTRYPOINT     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定这个容器启动的时候要运行的命令,可以追加命令")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("测试CMD")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#编写dockerfile 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim dockerfile-cmd-test")]),s._v("\nFROM centos\nCMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1s "')]),s._v(" , "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-a"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#构件镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build -f dockerfile-cmd-test -t cmdtest .")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# run运行，发现我们的1s -a命令生效")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run dd8e4401d72f")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n.dockerenv\nbin\ndev\netc\nhome\nlib\nlib64\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#想追加一个命令-1 1s -al")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run dd8e4401d72f -1")]),s._v("\ndocker: Error response from daemon: 0CI runtime create failed: container_1inux.go:349: startingcontainer process caused "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"exec: '),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v("-7"),t("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[s._v('\\"')]),s._v(": executable file not found in "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" unknown.\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# cmd的清理下-1替换了CMD ["1s ","-a"]命令，-1 不是命令所以报错!')]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[t("strong",[s._v("测试ENTRYPOINT")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim dockerfile-cmd-entrypoint")]),s._v("\nFROM centos\nENTRYPOINT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1s"')]),s._v(" , "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-a"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker build -f dockerfile-cmd-entrypoint -t entoryponit-test .")]),s._v("\nSending build context to Docker daemon "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".096kB\nstep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/2 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" FROM centos\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("470671670cac\nstep "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" ENTRYPOINT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ls"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-a"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Running "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" 444b257920ef\nRemoving intermediate container 444b257920ef\n---"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("3c4c9621ed91\nSuccessfu1ly built 3c4c9621ed91\nSuccessfu1ly tagged entoryponit-test "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" latest\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run 3c4c9621ed91")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#我们的追加命令，是直接拼接在我们的 ENTRYPOINT命令的后面!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost dockerfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run 3c4c9621ed91 -1")]),s._v("\ntotal "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),s._v("\ndrwxr-xr-x   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":15 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":15 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rwXr-Xr-x   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" May "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":15 .dockerenv\nlrwxrwxrwx   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" Mav "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" bin -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" usr/bin\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"_05-实战-tomcat镜像"}},[s._v("05 | 实战:Tomcat镜像")]),s._v(" "),t("p",[s._v("1、准备镜像文件 tomcat压缩包，jdk的压缩包")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720152703322-2021-10-4-21:57:19.png",alt:"image-20210720152703322"}})]),s._v(" "),t("p",[s._v("2、编写Dockerfile文件，官方命名Dockerfile, build会自动寻找这个文件，就不需要-f指定了!")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("FROM centos\nMAINTAINET kuangshen"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("24736743dqq.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nCOPY readme.txt /usr/local/readme.txt\nADD jdk-8u11-7inux-x64.tar.gz /usr/loca1/\nADD apache-tomcat-9.0.22.tar.gz /usr/loca1/\nRUN yum -y insta11 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\nENV MYPATH /usr/loca1wORKDIR SMYPATH\nENV JAVA_HOME /usr/loca1/jdk1.8.0_11\nENV CLASSPATH "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/1ib/dt.jar:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/1ib/too1s.jar\nENV CATALINA_HOME /usr/loca1/apache-tomcat-9.0.22\nENV CATALINA_BASH /usr/loca1/apache-tomcat-9.0.22\nENV "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CATALINA_HOME")]),s._v("/1ib:"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CATALINA_HOME")]),s._v("/bin\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\nCMD /usr/loca1/apache-tomcat-9.0.22/bin/startup.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -F /ur1/1oca1/apache-tomcat-9.0.22/bin/logs/catalina.out\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("3、构建镜像")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker build -t diytomcat "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("4、启动镜像")]),s._v(" "),t("p",[s._v("5、访问测试")]),s._v(" "),t("p",[s._v("6、发布项目（由于做了卷挂载，我们直接在本地编写项目就可以发布了! )")]),s._v(" "),t("p",[t("strong",[s._v("web.xml")])]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("web-app")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("xm1ns")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("http://java.sun.com/xm1/ns/javaee"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("xm1ns:")]),s._v("xsi")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("http://www.w3.org/2001/XMLSchema-instance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("xsi:")]),s._v("schemaLocation")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("http://java.sun. com/xm1/ns/javaee\n                             http:// java.sun.com/xm1/ns/javaee/web-app_2_5.xsd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n         "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("2.5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n</ web-app>\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("index.jsp")])]),s._v(" "),t("div",{staticClass:"language-jsp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<%page language="java" contentType="text/htm1; charset=UTF-8"\npageEncoding="UTF-8"%>\n<! DOCTYPE htm1>\n<html>\n    <head>\n        <meta charset="utf-8">\n        <title>he11o，kuangshen</title>\n    </head>\n    <body>\n        He1lo world!<br/>\n        <% \n        System.out.print1n("----my test web logs----");\n        %>\n    </body>\n</htm1>\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("发现:项目部署成功，可以直接访问ok !")]),s._v(" "),t("p",[s._v("我们以后开发的步骤:需要掌握Dokcerfile的编写!我们之后的一切都是使用docker镜像来发布运行!")]),s._v(" "),t("h3",{attrs:{id:"_06-发布自己的镜像"}},[s._v("06 | 发布自己的镜像")]),s._v(" "),t("blockquote",[t("p",[s._v("Dockerhub")])]),s._v(" "),t("p",[s._v("1、地址https://hub.docker.com/注册自己的账号!")]),s._v(" "),t("p",[s._v("2、确定这个这账号可以登录")]),s._v(" "),t("p",[s._v("3、在我们服务器上提交自己的镜像")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker login --help")]),s._v("\nusage:docker login "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("oPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("SERVER"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nLog "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" to a Docker registry.\nIf no server is specified，the default is defined by the daemon.\n\noptions "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("\n-p, --password stringPassword\n    --password-stdin Take the password from stdin\n-u, --username stringUsername\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("4、登录完毕后就可以提交镜像了，就是一步docker push")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#push自己的镜像到服务器上!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker push diytomcat")]),s._v("\ndenied "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" requested access to the resource is denied "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拒绝")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# push镜像的问题?")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker push kuangshen/diytomcat:1.0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#解决，增加一个tag")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker tag f8559daf1fc2 kuangshen/tomcat:1.0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#docker psuh上去即可!自己发布的镜像尽量带上版本号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker push kuangshen/tomcat: 1.0")]),s._v("\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004220716251-2021-10-4-22:07:16.png",alt:"image-20211004220716251"}})]),s._v(" "),t("p",[s._v("可以看到，提交的时候也是按照镜像的层级来进行提交的")]),s._v(" "),t("blockquote",[t("p",[s._v("阿里云镜像服务")])]),s._v(" "),t("p",[s._v("1、登录阿里云")]),s._v(" "),t("p",[s._v("2、找到容器镜像服务")]),s._v(" "),t("p",[s._v("3、创建命名空间")]),s._v(" "),t("p",[s._v("4、创建容器镜像")]),s._v(" "),t("p",[s._v("5、浏览阿里云")]),s._v(" "),t("p",[s._v("阿里云容器镜像就它的参考官方文档，简洁明了")]),s._v(" "),t("h3",{attrs:{id:"_07-小结"}},[s._v("07 | 小结")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720160544573-2021-10-4-22:13:56.png",alt:"image-20210720160544573"}})]),s._v(" "),t("h2",{attrs:{id:"七、docker-网络"}},[s._v("七、Docker 网络")]),s._v(" "),t("h3",{attrs:{id:"_01-理解docker0"}},[s._v("01 | 理解Docker0")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720173837789-2021-10-4-22:14:04.png",alt:"image-20210720173837789"}})]),s._v(" "),t("blockquote",[t("p",[s._v("问题：三个网络 Docker 是如何处理容器网络访问的？")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004221508039-2021-10-4-22:15:08.png",alt:"image-20211004221508039"}})]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p--name tomcat01 tomcat")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看容器的内部网络地址ip addr ，发现容器启动的时候会得到一个 etho@if262 ip地址，docker分配的!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat01 ip addr")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#思考。liunx能不能ping通容器内部!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rootakuangshen /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ping 172.18.0.2")]),s._v("\nPING "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.2: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tt1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.067")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.2: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.055")]),s._v(" ms\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1inux可以ping通docker容器内部")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("blockquote",[t("p",[s._v("原理")])]),s._v(" "),t("p",[s._v("1、我们每启动一个docker容器，docker就会给docker容器分配一个ip，我们只要安装了docker，就会有一个网卡docker0桥接模式，")]),s._v(" "),t("p",[s._v("使用的技术是"),t("strong",[s._v("evih-pair")]),s._v("技术!")]),s._v(" "),t("p",[s._v("再次测试ip addr")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004221721564-2021-10-4-22:17:21.png",alt:"image-20211004221721564"}})]),s._v(" "),t("p",[s._v("2、再启动一个容器测试，发现又多了一对网卡~")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004221825916-2021-10-4-22:18:26.png",alt:"image-20211004221825916"}})]),s._v(" "),t("p",[s._v("我们发现这个容器带来网卡，都是一对对的")]),s._v(" "),t("p",[s._v("evth-pair 就是一对的虚拟设备接口，他们都是成对出现的，一段连着协议，一段彼此相连")]),s._v(" "),t("p",[s._v("正因为有这个特性，evth-pair充当一个桥梁，连接各种虚拟网络设备的")]),s._v(" "),t("p",[s._v("openStac，Docker容器之间的连接，OVS的连接，都是使用evth-pair技术")]),s._v(" "),t("p",[s._v("3、我们来测试下 tomcat01 和 tomcat02 是否可以ping通")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat02 ping 172.18.0.2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#结论:容器和容器之间是可以互相ping通的!")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720175117036-2021-10-4-22:21:53.png",alt:"image-20210720175117036"}})]),s._v(" "),t("p",[s._v("结论: tomcat01和tomcat02是公用的一个路由器，docker0。")]),s._v(" "),t("p",[s._v("所有的容器不指定网络的情况下，都是docker0路由的，docker会给我们的容器分配一个默认的可用IP")]),s._v(" "),t("blockquote",[t("p",[s._v("小结")])]),s._v(" "),t("p",[s._v("Docker使用的是Linux的桥接，宿主机中是一个Dokcer容器的网桥docker0。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720175550907-2021-10-4-22:23:01.png",alt:"image-20210720175550907"}})]),s._v(" "),t("p",[s._v("Docker中的所有的网络接口都是虚拟的。虚拟的转发效率高!(内网传递文件!)只要容器删除，对应网桥一对就没了!")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker network "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\ndocker network inspect "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("NETWORK ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720180128332-2021-10-4-22:23:33.png",alt:"image-20210720180128332"}})]),s._v(" "),t("h3",{attrs:{id:"_02-link"}},[s._v("02 | --link")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("思考一个场景")]),s._v(" "),t("p",[s._v("我们编写了一个微服务，database url=ip:，项目不重启，数据库ip换掉了，我们希望可以处理这个问题，可以名字来进行访问容器?")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat02 ping tomcat01")]),s._v("\nping: tomcat01 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Name or "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" not known\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如何可以解决呢?")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#通过--1ink既可以解决了网络连通问题")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -d -p --name tomcat03 --1ink tomcat02 tomcat 5ca72d80ebb048d3560df1400af03130f37ece244be2a54884336aace2106884")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat03 ping tomcat02")]),s._v("\nPING tomcat02"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat02 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tt1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.100")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat02 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tt1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.066")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat02 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.067")]),s._v(" ms\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#反向可以ping通吗?")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat02 ping tomcat03")]),s._v("\nping: tomcat03: Name or "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" not known\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看docker0 网络配置信息")]),s._v("\ndocker network "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\ndocker network inspect docker0的网络ID\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("探究inspect！")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720184633613-2021-10-4-23:06:00.png",alt:"image-20210720184633613"}})]),s._v(" "),t("p",[s._v("其实这个"),t("strong",[s._v("tomcat03就是在本地配置了tomcat02的配置")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看hosts配置，在这里原理发现!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat03 cat /etc/hosts")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 localhost\n::1 localhost ip6-1oca1host ip6-1oopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-a11nodes\nff02::2 ip6-allrouters\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.3 tomcat02 312857784cd4\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.4 5ca72d80ebb0\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("本质探究:")]),s._v(" "),t("p",[s._v("--link就是我们在hosts配置中增加了一个"),t("code",[s._v("172.18.0.3 tomcat02 312857784cd4")])]),s._v(" "),t("p",[s._v("我们现在玩Docker "),t("strong",[s._v("已经不建议使用--link 了")]),s._v(" ,不适用于docker0 !")]),s._v(" "),t("p",[s._v("docker0问题:他不支持容器名连接访问!")]),s._v(" "),t("h3",{attrs:{id:"_03-自定义网络"}},[s._v("03 | 自定义网络")]),s._v(" "),t("blockquote",[t("p",[s._v("查看所有的docker网络")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720200725375-2021-10-4-22:31:51.png",alt:"image-20210720200725375"}})]),s._v(" "),t("p",[t("strong",[s._v("网络模式")])]),s._v(" "),t("p",[s._v("bridge ：桥接docker(默认，自己床架也使用bridge模式)none :不配置网络")]),s._v(" "),t("p",[s._v("host ：和宿主机共享网络")]),s._v(" "),t("p",[s._v("container ：容器网络连通!(用的少!局限很大)")]),s._v(" "),t("p",[t("strong",[s._v("测试")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#我们直接启动的命令 --net bridge，而这个就是我们的docker0")]),s._v("\ndocker run -d -p --name tomcat01 tomcat\ndocker run -d -p --name tomcat01 --net bridge tomcat\ndocker0特点:默认，域名不能访间， --link可以打通连接"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我们可以自定义一个网络!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --driver bridge")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --subnet 192.168.0.0/16   192.168.0.2   192.168.255.255")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --gateway 192.168.0.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rootkuangshen /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 mynet")]),s._v("\neb21272b3a35ceaba11b4aa5bbff131c3fb09c4790f0852ed4540707438db052\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network 1s")]),s._v("\nNETWORK ID        NAME                        DRIVER     SCOPE\n5a008co15cac      bridge                      bridge     "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\ndb44649a9bff      composetest_default         bridge     loca1\nae2b6209c2ab      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("                        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v("       1oca1\neb21272b3a35      mynet                       bridge     loca1\n\n\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("这样，我们自己的网络就创建好了")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720201308559-2021-10-4-22:32:09.png",alt:"image-20210720201308559"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720201448184-2021-10-4-22:38:59.png",alt:"image-20210720201448184"}})]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#再次测试ping连接")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat-net-01 ping 192.168.0.3")]),s._v("\nPING192.168.0.3 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.3: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tt1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.085")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.3: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tt1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.070")]),s._v(" msNC\n--- "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" statistics ---\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" packets transmitted，2 received，0% packet loss，time 999msrtt min/avg/max/mdev "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.070")]),s._v("/0.077/0.085/0.011 ms\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#现在不使用--link也可以ping名字了!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat-net-01 ping tomcat-net-02")]),s._v("\nPING tomcat-net-02 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-net-02.mynet "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tt1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.055")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-net-02.mynet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.063")]),s._v(" ms\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("我们自定义的网络docker都已经帮我们维护好了对应的关系，推荐我们平时这样使用网络!")]),s._v(" "),t("p",[t("strong",[s._v("好处︰")])]),s._v(" "),t("p",[s._v("redis-不同的集群使用不同的网络，保证集群是安全和健康的")]),s._v(" "),t("p",[s._v("mysql -不同的集群使用不同的网络，保证集群是安全和健康的")]),s._v(" "),t("h3",{attrs:{id:"_04-网络联通"}},[s._v("04 | 网络联通")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720201852766-2021-10-4-22:41:43.png",alt:"image-20210720201852766"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720201909113-2021-10-4-22:41:52.png",alt:"image-20210720201909113"}})]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#测试打通tomcat01 - mynet")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network connect mynet tomcat01")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#连通之后就是将tomcat01放到了mynet网络下")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#—个容器两个ip地址!")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#阿里云服务:公网ip私网ip")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720202107718-2021-10-4-22:43:23.png",alt:"image-20210720202107718"}})]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#01 连通ok")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat01 ping tomcat-net-01")]),s._v("\nPING tomcat-net-01 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bytes of data.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-net-01.mynet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.072")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bytes from tomcat-net-01.mynet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("icmp_seq")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tt1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.070")]),s._v(" ms\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#02是依旧打不通的")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost/"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it tomcat02 ping tomcat-net-01")]),s._v("\nping: tomcat-net-01: Name or "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" not known\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("结论︰假设要跨网络操作别人，就需要使用docker network connect 连通")])]),s._v(" "),t("h3",{attrs:{id:"_05-实战-部署redis集群"}},[s._v("05 | 实战：部署Redis集群")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720204241664-2021-10-4-22:45:24.png",alt:"image-20210720204241664"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720202327593-2021-10-4-22:45:29.png",alt:"image-20210720202327593"}})]),s._v(" "),t("p",[s._v("shell脚本")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建网卡")]),s._v("\ndocker network create redis --subnet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.0/16\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#通过脚本创建六个redis配置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("seq "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /mydata/redis/node-S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /mydata/redis/node-Siport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/conf/redis.conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/mydata/redis/node-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v("/conf/redis.conf")]),s._v("\nport 6379\nbind 0.0.0.0\ncluster-enab1ed yes\ncluster-config-file nodes. confcluster-node-timeout 5000\ncluster-announce-ip 172.38.0.1S{port}cluster-announce-port 6379\ncluster-announce-bus-port 16379appendonly yes\nEOF")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\ndocker run -p 637S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(":6379 -p 1637S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(":16379 --name redis-"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${port}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v/mydata/redis/node-S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/data:/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v/mydata/redis/node-S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/conf/redis.conf:/etc/redis/redis.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.1S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\ndocker run -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6371")]),s._v(":6379 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16371")]),s._v(":16379 --name redis-1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/redis/node-1/data:/ data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/redis/node-1/conf/redis.conf:/etc/redis/redis.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.11 redis:5.0.9-alpine3.11 redis-server /etc/redis/redis.conf\n\ndocker run -pr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6372")]),s._v(":6379 -p "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16372")]),s._v(":16379 --name redis-2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/redis/node-2/data:/data "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-v /mydata/redis/node-2/conf/redis.conf:/etc/redis/redis.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n-d --net redis --ip "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.12 redis:5.0.9-alpine3.11 redis-server /etc/redis/vedis.conf\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建集群")]),s._v("\nredis-c1i --cluster create "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.11:6379 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.12:6379 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.13:6379 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.14:6379 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.15:6379 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.38")]),s._v(".0.16:6379 --cluster-replicas "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20210720202926056-2021-10-4-22:47:00.png",alt:"image-20210720202926056"}})]),s._v(" "),t("p",[s._v("docker搭建redis集群完成")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/small-universe/file-bed/raw/master/Python/Docker/image-20211004224629714-2021-10-4-22:46:30.png",alt:"image-20211004224629714"}})]),s._v(" "),t("p",[s._v("我们使用了docker之后，所有的技术都会慢慢的变得简单起来!")]),s._v(" "),t("h2",{attrs:{id:"八、spring-boot微服务打包成docker镜像"}},[s._v("八、Spring Boot微服务打包成Docker镜像")])])}),[],!1,null,null,null);a.default=e.exports}}]);